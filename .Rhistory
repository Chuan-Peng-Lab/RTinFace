geom_density()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
mutate(country = as.factor(country)) %>%
drop_na(country) %>%
filter(country != "--") %>%
ggplot(aes(x=rating,color = country))+
facet_wrap(~country)+
geom_density()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
mutate(country = as.factor(country)) %>%
drop_na(country) %>%
filter(country != "--") %>%
ggplot(aes(x=rating,color = country, fill = country))+
facet_wrap(~country)+
geom_density()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
mutate(country = as.factor(country)) %>%
drop_na(country) %>%
filter(country != "--") %>%
ggplot(aes(x=rating,color = country, fill = country))+
facet_wrap(~country)+
geom_density()+
theme_classic()
library("tidyverse")
fulldata <- read.csv("data/rt_tidy.csv")
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~country)+
geom_density()+
theme_classic()
View(fulldata)
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait)+
geom_density()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_density()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_bar()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_density()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_bar()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_bar()+
theme(panel.grid = element_blank(),
axis.line = element_line(colour = "black"),
text = element_text(family = "Arial", size = 12),
legend.position = "none",
panel.border = element_blank()) +
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_bar()+
theme(panel.grid = element_blank(),
axis.line = element_line(colour = "black"),
text = element_text(family = "Arial", size = 12),
legend.position = "none",
panel.border = element_blank())
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_bar()+
theme_classic()
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_bar()+
theme_classic()+
ggtitle("Figure 1. Density plot for rating distribution across different traits")
# Create a data frame with example data
demo_data <- data.frame(demographic_category = c("18-24", "25-34", "35-44", "45-54", "55+"),
count = c(20, 35, 15, 10, 5))
# Create a horizontal bar chart using ggplot2
ggplot(data = demo_data, aes(x = count, y = demographic_category)) +
geom_bar(stat = "identity", fill = "blue") +
labs(title = "Participant Demographics", x = "Count", y = "Demographic Category") +
theme_minimal()
# Create example data frame with country, region, and count columns
demo_data <- data.frame(country = c("USA", "Canada", "Mexico", "Brazil", "Argentina", "UK", "France", "Germany", "Spain", "Italy", "Russia", "China", "Japan", "India", "Australia"),
region = c("North America", "North America", "North America", "South America", "South America", "Europe", "Europe", "Europe", "Europe", "Europe", "Asia", "Asia", "Asia", "Asia", "Australia"),
count = c(12, 8, 5, 6, 4, 15, 10, 7, 6, 5, 8, 9, 10, 11, 4))
# Aggregate counts by region
demo_data_region <- demo_data %>%
group_by(region) %>%
summarise(count_region = sum(count))
# Join aggregated counts to original data frame
demo_data <- demo_data %>%
left_join(demo_data_region, by = "region")
# Create a stacked horizontal bar chart in ggplot2
ggplot(data = demo_data, aes(x = count, y = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
library("tidyverse")
fulldata <- read.csv("data/rt_tidy.csv")
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4))
View(region)
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4))
unique(region)
unique(fulldata$country)
it)
unique(fulldata$trait)
unique(fulldata$country)
unique(region)
data <- read_csv("https://ndownloader.figshare.com/files/8542045")
View(data)
regions <- read_csv("data/regions.csv")
View(regions)
fulldata <- read.csv("data/rt_tidy.csv")
regions <- read.csv("data/regions.csv")
fulldata %>%
select(country) %>%
left_join(region, by = country)
fulldata %>%
select(country) %>%
left_join(region, by = "country")
region <- fulldata %>%
select(country) %>%
left_join(region, by = "country")
region <- fulldata %>%
select(country)
region <- fulldata %>%
select(country) %>%
left_join(regions, by = "country")
View(region)
regions <- read_csv("data/regions.csv")
View(regions)
session <- read_csv("data/psa001_session_subset.csv")
dat_quest <- read_csv("data/psa001_quest_data_subset.csv")
dat_exp <- read_csv("data/psa001_exp_data_subset.csv")
# reshape questionnaire data to make wide
quest <- dat_quest %>%
select(session_id, endtime, user_id, q_name, dv) %>%
group_by(session_id, user_id, q_name) %>%
arrange(endtime) %>%
filter(row_number() == 1) %>%
ungroup() %>%
spread(q_name, dv, convert = TRUE)
ratings_raw <-  dat_exp %>%
left_join(session, by = c("user_id", "session_id")) %>%
filter(user_status %in% c("guest", "registered")) %>%
separate(exp_name, c("psa", "language", "trait", "block"),
sep = "_") %>%
select(-psa) %>%
separate(proj_name, c("psa", "lang", "lab1", "lab2"),
sep = "_", fill = "right") %>%
filter(lab1 != "test") %>%
unite(lab_id, c("lab1", "lab2")) %>%
select(-psa, lang) %>%
left_join(quest, by = c("session_id", "user_id")) %>%
select(language, user_id = session_id, trait,
stim_id = trial_name,
order, rt, rating = dv,
country, sex, age, ethnicity, lab = lab_id, block) %>%
mutate(trait = recode(trait,
"Res" = "responsible",
"Wei" = "weird",
"Old" = "old",
"Tru" = "trustworthy",
"Dom" = "dominant",
"Emo" = "emostable",
"Agg" = "aggressive",
"Car" = "caring",
"Int" = "intelligent",
"Unh" = "unhappy",
"Soc" = "sociable",
"Mea" = "mean",
"Con" = "confident",
"Att" = "attractive"
))
View(dat_exp)
View(dat_quest)
View(data)
View(region)
View(quest)
View(regions)
View(region)
ratings_raw <-  dat_exp %>%
left_join(session, by = c("user_id", "session_id")) %>%
filter(user_status %in% c("guest", "registered")) %>%
separate(exp_name, c("psa", "language", "trait", "block"),
sep = "_") %>%
select(-psa) %>%
separate(proj_name, c("psa", "lang", "lab1", "lab2"),
sep = "_", fill = "right") %>%
filter(lab1 != "test") %>%
unite(lab_id, c("lab1", "lab2")) %>%
select(-psa, lang) %>%
left_join(quest, by = c("session_id", "user_id")) %>%
select(language, user_id = session_id, trait,
stim_id = trial_name,
order, rt, rating = dv,
country, sex, age, ethnicity, lab = lab_id, block) %>%
mutate(trait = recode(trait,
"Res" = "responsible",
"Wei" = "weird",
"Old" = "old",
"Tru" = "trustworthy",
"Dom" = "dominant",
"Emo" = "emostable",
"Agg" = "aggressive",
"Car" = "caring",
"Int" = "intelligent",
"Unh" = "unhappy",
"Soc" = "sociable",
"Mea" = "mean",
"Con" = "confident",
"Att" = "attractive"
))
View(ratings_raw)
regions <- read_csv("data/regions.csv")
View(regions)
ratings <- ratings_raw %>%
rename(qcountry = country) %>%
separate(lab, c("country", "lab")) %>%
left_join(regions, by = "country") %>%
filter(trait != "old")
View(ratings)
View(ratings_raw)
View(regions)
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4))
View(region)
unique(region)
fulldata <- read.csv("data/rt_tidy.csv")
regions <- read.csv("data/regions.csv")
region <- fulldata %>%
select(lab, country) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
left_join(regions, by = country)
region <- fulldata %>%
select(lab, country) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
left_join(regions, by = "country")
View(region)
View(regions)
region <- fulldata %>%
select(lab, country) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
left_join(regions, by = "country")
View(regions)
View(region)
unique(region$region)
region <- fulldata %>%
select(lab, country) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
left_join(regions, by = "country") %>%
group_by(country) %>%
summarise(n())
View(region)
region <- fulldata %>%
select(lab, country) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
left_join(regions, by = "country") %>%
group_by(country) %>%
summarise(n()) %>%
ungroup()
View(region)
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
summarise(n()) %>%
ungroup() %>%
left_join(regions, by = "country")
View(region)
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
summarise() %>%
ungroup() %>%
left_join(regions, by = "country")
View(region)
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
summarise(n(name = "1")) %>%
ungroup() %>%
left_join(regions, by = "country")
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
summarise(count()) %>%
ungroup() %>%
left_join(regions, by = "country")
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count() %>%
ungroup() %>%
left_join(regions, by = "country")
View(region)
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = number) %>%
ungroup() %>%
left_join(regions, by = "country")
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country")
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
#geom_bar(stat = "identity", position = "stack") +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar() +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar(stat = "identity") +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(y = number, x = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Fig.1 Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Fig.1 Participant Demographics", x = "Count", y = "Region", tag = "1") +
theme_minimal()
region
region <- fulldata %>%
select(lab) %>%
mutate(lab  = substr(lab,1,nchar(lab)-4)) %>%
mutate(country = lab) %>%
group_by(country) %>%
count(name = "number") %>%
ungroup() %>%
left_join(regions, by = "country") %>%
ggplot(., aes(x = number, y = region, fill = country)) +
geom_bar(stat = "identity", position = "stack") +
labs(title = "Fig.1 Participant Demographics", x = "Count", y = "Region") +
theme_minimal()
region
fulldata %>%
mutate(rating = as.numeric(rating)) %>%
mutate(trait = as.factor(trait)) %>%
ggplot(aes(x=rating,color = trait, fill = trait))+
facet_wrap(~trait, 2)+
geom_bar()+
theme_classic()+
ggtitle("Figure 2. Density plot for rating distribution across different traits")
if(!requireNamespace("tinytex", quietly = TRUE)) install.packages("tinytex")
install.packages("papaja")
tinytex::install_tinytex()
